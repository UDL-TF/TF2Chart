replicaCount: 1

workload:
  kind: Deployment # Deployment or StatefulSet
  nameOverride: ""
  deploymentStrategy:
    type: Recreate

statefulSet:
  nameOverride: ""
  serviceName: ""
  podManagementPolicy: OrderedReady
  updateStrategy: {}
  volumeClaimTemplates: []

app:
  name: tf2-merger
  image:
    repository: ghcr.io/udl-tf/tf2-image
    tag: latest
    pullPolicy: IfNotPresent
  containerPort: 28015
  ports:
    - name: game-udp
      containerPort: 28015
      protocol: UDP
  env: []
  command: []
  args: []
  stdin: false
  tty: false
  livenessProbe: {}
  readinessProbe: {}
  startupProbe: {}
  resources: {}
  securityContext: {}
  extraVolumeMounts: []
  lifecycle: {}

merger:
  enabled: true
  image:
    repository: alpine
    tag: latest
    pullPolicy: IfNotPresent
  resources: {}
  securityContext: {}
  extraEnv: []
  extraVolumeMounts: []
  watcher:
    enabled: true
    image:
      repository: alpine
      tag: latest
      pullPolicy: IfNotPresent
    installInotifyTools: true
    events:
      - close_write
      - create
      - delete
      - moved_to
      - moved_from
      - delete_self
      - move_self
    debounceSeconds: 2
    pollIntervalSeconds: 300
    watchPaths: []
    command: []
    args: []
    env: []
    resources: {}
    securityContext: {}
    extraVolumeMounts: []
    watchBase: true

initContainers:
  pre: []
  post: []

permissionsInit:
  enabled: true
  image: busybox
  imagePullPolicy: IfNotPresent
  name: init-permissions
  user: 1000
  group: 1000
  chmod: "775"
  path: ""
  volumeName: host-base
  mountPath: /mnt/base
  runFirst: true
  runLast: true
  postName: init-permissions-final
  postPath: /tf
  postMountPath: /tf
  postVolume: view-layer
  applyDuringMerge: true
  applyPaths: []

entrypointCopy:
  enabled: true
  name: init-entrypoint
  sourcePath: /tf/entrypoint.sh
  destinationPath: /tf/entrypoint.sh
  chmod: "755"
  image:
    repository: ghcr.io/udl-tf/tf2-image
    tag: latest
    pullPolicy: IfNotPresent
  resources: {}
  securityContext: {}

paths:
  hostSource: /tf/standalone
  hostPathType: Directory
  containerTarget: /tf

# The additive overlay layers that are merged in order.
overlays:
  - name: serverfiles
    type: hostPath
    path: /mnt/serverfiles
    # subPath: base
    # sourcePath: serverfiles/base
    hostPathType: Directory
    readOnly: true
    watchParentDepth: 1
    extraWatchPaths: []

# Writable passthrough directories that map directly to the base host path.
writablePaths:
  - tf/logs
  # - path: tf/tf/addons/sourcemod/configs/sourcebans
  #   overlay: serverfiles-runtime
  #   subPath: tf/tf/addons/sourcemod/configs/sourcebans
  # - path: tf/uploads
  #   overlay: serverfiles-runtime
  #   subPath: tf/uploads
  #   sourceMount: /mnt/overlays/serverfiles-runtime

# Copy-only templates refresh a writable directory from an overlay snapshot on
# every merge run. This is helpful for configs that should start from a clean
# template and accept runtime edits without touching the original overlay.
copyTemplates: []
  # - targetPath: tf/tf/addons/sourcemod/configs/sourcebans
  #   overlay: serverfiles-runtime
  #   sourcePath: tf/tf/addons/sourcemod/configs/sourcebans
  #   cleanTarget: true
  #   sourceMount: /mnt/overlays/serverfiles-runtime

hostNetwork: false
dnsPolicy: ""
serviceAccountName: ""

service:
  enabled: true
  type: ClusterIP
  port: 28015
  targetPort: 28015
  ports:
    - name: game-udp
      port: 28015
      targetPort: game-udp
      protocol: UDP
  nameOverride: ""
  headless: false
  clusterIP: ""
  externalTrafficPolicy: ""
  annotations: {}

podAnnotations: {}
podLabels: {}
podSecurityContext: {}
nodeSelector: {}
tolerations: []
affinity: {}
priorityClassName: ""
extraVolumes: []
